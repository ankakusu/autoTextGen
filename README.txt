$ tree
.
├── assign-texts.sh
├── hash-mails.sh
├── mails-inp
│   ├── 1.txt
│   ├── f
│   │   └── k
│   │       └── l
│   │           ├── 33.txt
│   │           └── 42.txt
│   └── hede_1.txt
└── users.csv

4 directories, 7 files



$ ./hash-mails.sh
Usage: ./hash-mails.sh <INPUT-DIR> <OUTPUT-DIR>

$ ./hash-mails.sh mails-inp mails-out

$ tree
.
├── assign-texts.sh
├── hash-mails.sh
├── mails-inp
│   ├── 1.txt
│   ├── f
│   │   └── k
│   │       └── l
│   │           ├── 33.txt
│   │           └── 42.txt
│   └── hede_1.txt
├── mails-out
│   ├── 0e6830d0046b821e146076ff021fd027.txt
│   ├── 216f01333c95d24a7454a6cef25d64d9.txt
│   ├── 9920ba99ddd2cb2bae988b26c8dc33c2.txt
│   └── ad1ad1db706ea0adb88cd8c331d8415d.txt
└── users.csv

5 directories, 11 files



$ cat users.csv
43,volkan.yazici@gmail.com,Volkan Yazıcı
12,yaprak.ayazoglu@gmail.com,Yaprak Ayazoğlu

$ ./assign-texts.sh
Usage: ./assign-texts.sh <TEXT-DIR> <USERS-FILE> <N-TEXT> <OUT_DIR>

  <TEXT-DIR>    Directory to search for text files.
  <USERS-FILE>  CVS file for the list of users.
  <N-TEXT>      Number of texts to be assigned.
  <OUT-DIR>     Output directory.

$ ./assign-texts.sh mails-out users.csv 5 mails-fin
There are 4 texts available in 'mails-out'.
And there are 2 users in 'users.csv'.
But 5x2=10 texts are required.

$ ./assign-texts.sh mails-out users.csv 2 mails-fin

$ tree
.
├── assign-texts.sh
├── hash-mails.sh
├── mails-fin
│   ├── volkan.yazici@gmail.com
│   │   ├── 1.txt
│   │   └── 2.txt
│   └── yaprak.ayazoglu@gmail.com
│       ├── 1.txt
│       └── 2.txt
├── mails-inp
│   ├── 1.txt
│   ├── f
│   │   └── k
│   │       └── l
│   │           ├── 33.txt
│   │           └── 42.txt
│   └── hede_1.txt
├── mails-out
│   ├── 0e6830d0046b821e146076ff021fd027.txt
│   ├── 216f01333c95d24a7454a6cef25d64d9.txt
│   ├── 9920ba99ddd2cb2bae988b26c8dc33c2.txt
│   └── ad1ad1db706ea0adb88cd8c331d8415d.txt
└── users.csv

8 directories, 15 files




$ ./prepare-attachments.sh
Usage: ./prepare-attachments.sh <USERS-FILE> <INPUT-DIR> <OUTPUT-DIR>

  <USERS-FILE> CVS file for the list of users.
  <INPUT-DIR>  Directory generated by "assign-texts.sh" script.
  <OUTPUT-DIR> Output directory.

$ ./prepare-attachments.sh users.csv mails-fin mails-zip
updating: 1.txt (deflated 9%)
updating: 2.txt (deflated 8%)
updating: README.html (deflated 74%)
updating: 1.txt (deflated 11%)
updating: 2.txt (deflated 7%)
updating: README.html (deflated 74%)

$ tree mails-zip
mails-zip
├── 12
│   ├── 1.txt
│   ├── 2.txt
│   └── README.html
├── 43
│   ├── 1.txt
│   ├── 2.txt
│   └── README.html
├── ses_kayit_12.zip
└── ses_kayit_43.zip

2 directories, 8 files




$ grep ^SMTP send-mail.py
SMTP_SERVER = "smtp.gmail.com"
SMTP_PORT = 587
SMTP_USERNAME = "volkan.yazici@gmail.com"
SMTP_PASSWORD = "xxx"
SMTP_FROM = "Volkan Yazıcı <volkan.yazici@gmail.com>"
SMTP_CC = "Volkan Yazıcı <volkan.yazici@gmail.com>"

$ ./send-mails.sh
Usage: ./send-mails.sh <USERS-FILE> <INPUT-DIR> <MAIL-SUBJECT> <MAIL-BODY-PATH>

  <USERS-FILE>     CVS file for the list of users.
  <INPUT-DIR>      Directory generated by "prepare-attachments.sh" script.
  <MAIL-SUBJECT>   Subject of the will be sent mails.
  <MAIL-BODY-PATH> File containing the mail body text.

$ ./send-mails.sh users.csv mails-zip "Neoses deneme" mail-body.txt
...
...
...
